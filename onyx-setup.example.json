{
  "docker_compose": {
    "compose_dir": "deployment/docker_compose",
    "services": {
      "nginx": {
        "internal": 80,
        "description": "Web interface"
      },
      "api_server": {
        "internal": 8080,
        "description": "Backend API"
      },
      "relational_db": {
        "internal": 5432,
        "description": "PostgreSQL",
        "volumes": ["db_volume"]
      },
      "index": {
        "internal": 19071,
        "description": "Vespa search",
        "volumes": ["vespa_volume"]
      },
      "cache": {
        "internal": 6379,
        "description": "Redis"
      },
      "minio": {
        "internal": 9000,
        "description": "S3 storage",
        "volumes": ["minio_data"]
      }
    }
  },
  "setup_steps": [
    {
      "name": "Python virtual environment",
      "type": "python_venv"
    },
    {
      "name": "Python dependencies",
      "type": "pip_install",
      "requirements": [
        "backend/requirements/default.txt",
        "backend/requirements/dev.txt",
        "backend/requirements/ee.txt",
        "backend/requirements/model_server.txt"
      ]
    },
    {
      "name": "Editable package install",
      "type": "pip_install_editable",
      "path": "."
    },
    {
      "name": "Pre-commit",
      "type": "pip_install_package",
      "package": "pre-commit"
    },
    {
      "name": "Playwright",
      "type": "playwright_install"
    },
    {
      "name": "Pre-commit hooks",
      "type": "precommit_install",
      "path": "backend"
    },
    {
      "name": "Node dependencies",
      "type": "npm_install",
      "path": "web"
    }
  ]
}
